/*!
 * PlotBoilerplate,
 * Git branch https://github.com/IkarosKappler/plot-boilerplate/commit/fce912f
 */!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),t.exports=i(14)},function(t,e){!function(t){"use strict";var e=function(){for(var t in this.draggable=!0,this.isSelected=!1,e.model)this[t]=e.model[t]};e.model={draggable:!0,isSelected:!1},t.VertexAttr=e}(window)},function(t,e){!function(t){"use strict";var e=function(t){this.drag=[],this.dragStart=[],this.dragEnd=[],this.vertex=t};e.prototype.addDragListener=function(t){this.drag.push(t)},e.prototype.addDragStartListener=function(t){this.dragStart.push(t)},e.prototype.addDragEndListener=function(t){this.dragEnd.push(t)},e.prototype.fireDragEvent=function(t){i(this,this.drag,t)},e.prototype.fireDragStartEvent=function(t){i(this,this.dragStart,t)},e.prototype.fireDragEndEvent=function(t){i(this,this.dragEnd,t)};var i=function(t,e,i){for(var r in void 0===i.params&&(i.params={}),i.params.vertex=t.vertex,e)e[r](i)};t.VertexListeners=e}(window)},function(t,e){var i,r;i=window||t.exports,(r=i.Vertex=function(t,e){"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this.attr=new VertexAttr,this.listeners=new VertexListeners(this)}).prototype.set=function(t,e){return"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.addXY=function(t,e){return this.x+=t,this.y+=e,this},r.prototype.equals=function(t){var e=Math.abs(this.x-t.x)<1e-6,i=Math.abs(this.y-t.y)<1e-6;return e&&i},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.distance=function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))},r.prototype.scale=function(t,e){return e&&void 0!==e||(e=new r(0,0)),this.x=e.x+(this.x-e.x)*t,this.y=e.y+(this.y-e.y)*t,this},r.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},r.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},r.prototype.toString=function(){return"("+this.x+","+this.y+")"}},function(t,e,i){(function(t){(window||t.export).Grid=function(t,e){this.center=t,this.size=e}}).call(this,i(0)(t))},function(t,e){!function(t){"use strict";var e=function(t,e,i,r){Object.call(this),this.startPoint=t,this.startControlPoint=i,this.endPoint=e,this.endControlPoint=r,this.curveIntervals=30,this.segmentCache=[],this.segmentLengths=[],this.arcLength=null,this.updateArcLengths()};e.START_POINT=0,e.START_CONTROL_POINT=1,e.END_CONTROL_POINT=2,e.END_POINT=3,(e.prototype=new Object).constructor=e,e.prototype.START_POINT=0,e.prototype.START_CONTROL_POINT=1,e.prototype.END_CONTROL_POINT=2,e.prototype.END_POINT=3,e.prototype.moveCurvePoint=function(t,e,i,r){t==this.START_POINT?(this.getStartPoint().add(e),i&&this.getStartControlPoint().add(e)):t==this.START_CONTROL_POINT?this.getStartControlPoint().add(e):t==this.END_CONTROL_POINT?this.getEndControlPoint().add(e):t==this.END_POINT?(this.getEndPoint().add(e),i&&this.getEndControlPoint().add(e)):console.log("[IKRS.CubicBezierCurve.moveCurvePoint] pointID '"+t+"' invalid."),r&&this.updateArcLengths()},e.prototype.translate=function(t){this.startPoint.add(t),this.startControlPoint.add(t),this.endControlPoint.add(t),this.endPoint.add(t)},e._scalePoint=function(t,e,i){t.sub(e),t.setX(t.x*i.x),t.setY(t.y*i.y),t.add(e)},e.prototype.getLength=function(){return this.arcLength},e.prototype.locateCurveByPoint=function(t){for(var e=0;e<this.bezierCurves.length;e++)if(this.bezierCurves[e].startPoint.equals(t)||this.bezierCurves[e].endPoint.equals(t))return e;return-1},e.prototype.computeVerticalAreaSize=function(t,e,i){if(0==e)throw"Cannot compute bezier curve's vertical area size with delta=0.";if(this.segmentCache.length<=1)return 0;for(var r=0,n=0;n+1<this.segmentCache.length;n++)r+=this._computeVerticalAreaSizeForSegment(t,e,i,n);return r},e.prototype._computeVerticalAreaSizeForSegment=function(t,e,i,r){if(r+1>=this.segmentCache.length)return 0;var n=this.segmentCache[r],s=this.segmentCache[r+1],o=s.y-n.y,a=t-n.x,h=t-s.x,u=h+(a-h)/2;return i?Math.abs(o*u):o*u},e.prototype.computeVerticalRevolutionVolumeSize=function(t,e){if(this.segmentCache.length<=1)return 0;for(var i=0,r=0;r+1<this.segmentCache.length;r++)i+=this._computeVerticalRevolutionVolumeSizeForSegment(t,e,r);return i},e.prototype._computeVerticalRevolutionVolumeSizeForSegment=function(t,e,i){if(i+1>=this.segmentCache.length)return 0;var r=this.segmentCache[i],n=this.segmentCache[i+1],s=n.y-r.y,o=(t-r.x+(t-n.x))/2,a=Math.PI*Math.pow(o,2)*s;return e?Math.abs(a):a},e.prototype.updateArcLengths=function(){var t=new Vertex(this.startPoint.x,this.startPoint.y),e=new Vertex(0,0),i=1/this.curveIntervals;this.segmentCache=[],this.segmentCache.push(this.startPoint),this.segmentLengths=[],this.arcLength=0;for(var r=0;r<this.curveIntervals;r++){e=this.getPoint((r+1)*i),this.segmentCache.push(e);var n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));this.segmentLengths.push(n),this.arcLength+=n,t=e,i}},e.prototype.getStartPoint=function(){return this.startPoint},e.prototype.getEndPoint=function(){return this.endPoint},e.prototype.getStartControlPoint=function(){return this.startControlPoint},e.prototype.getEndControlPoint=function(){return this.endControlPoint},e.prototype.getPointByID=function(t){if(t==this.START_POINT)return this.startPoint;if(t==this.END_POINT)return this.endPoint;if(t==this.START_CONTROL_POINT)return this.startControlPoint;if(t==this.END_CONTROL_POINT)return this.endControlPoint;throw"Invalid point ID '"+t+"'."},e.prototype.getPoint=function(t){var e=this.startPoint.x*Math.pow(1-t,3)+3*this.startControlPoint.x*t*Math.pow(1-t,2)+3*this.endControlPoint.x*Math.pow(t,2)*(1-t)+this.endPoint.x*Math.pow(t,3),i=this.startPoint.y*Math.pow(1-t,3)+3*this.startControlPoint.y*t*Math.pow(1-t,2)+3*this.endControlPoint.y*Math.pow(t,2)*(1-t)+this.endPoint.y*Math.pow(t,3);return new Vertex(e,i)},e.prototype.getPointAt=function(t){return this.getPoint(t/this.arcLength)},e.prototype.getTangent=function(t){var e=this.getStartPoint(),i=this.getStartControlPoint(),r=this.getEndControlPoint(),n=this.getEndPoint(),s=t*t,o=1-2*t+s,a=-3*e.x*o+i.x*(3*o-6*(t-s))+r.x*(6*(t-s)-3*s)+3*n.x*s,h=-3*e.y*o+i.y*(3*o-6*(t-s))+r.y*(6*(t-s)-3*s)+3*n.y*s;return new Vertex(a,h)},e.prototype.convertU2T=function(t){return Math.max(0,Math.min(1,t/this.arcLength))},e.prototype.getTangentAt=function(t){return this.getTangent(this.convertU2T(t))},e.prototype.getPerpendicularAt=function(t){return this.getPerpendicular(this.convertU2T(t))},e.prototype.getPerpendicular=function(t){var e=this.getTangent(t);return new Vertex(e.y,-e.x)},e.prototype.computeBoundingBox=function(){return BoundingBox2.computeFromPoints(this.segmentCache)},e.prototype.clone=function(){return new e(this.getStartPoint().clone(),this.getEndPoint().clone(),this.getStartControlPoint().clone(),this.getEndControlPoint().clone())},e.prototype.equals=function(t){return!!t&&(!!(t.startPoint&&t.endPoint&&t.startControlPoint&&t.endControlPoint)&&(this.startPoint.equals(t.startPoint)&&this.endPoint.equals(t.endPoint)&&this.startControlPoint.equals(t.startControlPoint)&&this.endControlPoint.equals(t.endControlPoint)))},e.prototype.toSVGPathData=function(){var t=[];return t.push("M "),t.push(this.startPoint.x),t.push(" "),t.push(this.startPoint.y),t.push(" C "),t.push(this.startControlPoint.x),t.push(" "),t.push(this.startControlPoint.y),t.push(" "),t.push(this.endControlPoint.x),t.push(" "),t.push(this.endControlPoint.y),t.push(" "),t.push(this.endPoint.x),t.push(" "),t.push(this.endPoint.y),t.join("")},e.prototype.toJSON=function(t){return"{ "+(t?"\n\t":"")+'"startPoint" : ['+this.getStartPoint().x+","+this.getStartPoint().y+"], "+(t?"\n\t":"")+'"endPoint" : ['+this.getEndPoint().x+","+this.getEndPoint().y+"], "+(t?"\n\t":"")+'"startControlPoint": ['+this.getStartControlPoint().x+","+this.getStartControlPoint().y+"], "+(t?"\n\t":"")+'"endControlPoint" : ['+this.getEndControlPoint().x+","+this.getEndControlPoint().y+"]"+(t?"\n\t":"")+" }"},e.fromJSON=function(t){var i=JSON.parse(t);return e.fromObject(i)},e.fromObject=function(t){if("object"!=typeof t)throw"[IKRS.CubicBezierCurve.fromObject] Can only build from object.";if(!t.startPoint)throw'[IKRS.CubicBezierCurve.fromObject] Object member "startPoint" missing.';if(!t.endPoint)throw'[IKRS.CubicBezierCurve.fromObject] Object member "endPoint" missing.';if(!t.startControlPoint)throw'[IKRS.CubicBezierCurve.fromObject] Object member "startControlPoint" missing.';if(!t.endControlPoint)throw'[IKRS.CubicBezierCurve.fromObject] Object member "endControlPoint" missing.';return new e(new Vertex(t.startPoint[0],t.startPoint[1]),new Vertex(t.endPoint[0],t.endPoint[1]),new Vertex(t.startControlPoint[0],t.startControlPoint[1]),new Vertex(t.endControlPoint[0],t.endControlPoint[1]))},e.fromArray=function(t){if(!Array.isArray(t))throw"[IKRS.CubicBezierCurve.fromArray] Can only build from object.";if(4!=t.length)throw"[IKRS.CubicBezierCurve.fromArray] Can only build from array with four elements.";return new e(t[0],t[1],t[2],t[3])},t.CubicBezierCurve=e}(window)},function(t,e){!function(t){"use strict";var e=function(t){Object.call(this),t||(t=[]),this.totalArcLength=0,this.adjustCircular=!1,this.bezierCurves=[];for(var e=1;e<t.length;e++){var i=new THREE.Box2(t[e].x-t[e-1].x,t[e].y-t[e-1].y),r=new CubicBezierCurve(t[e-1],t[e],new Vertex(t[e-1].x,t[e-1].y-i.min/2),new Vertex(t[e].x+i.max/2,t[e].y));this.bezierCurves.push(r),this.totalArcLength+=r.getLength(),this.bezierCurves.length>=2&&this.adjustSuccessorControlPoint(this.bezierCurves.length-2,!0,!0)}};e.prototype.constructor=e,e.START_POINT=0,e.START_CONTROL_POINT=1,e.END_CONTROL_POINT=2,e.END_POINT=3,e.prototype.START_POINT=0,e.prototype.START_CONTROL_POINT=1,e.prototype.END_CONTROL_POINT=2,e.prototype.END_POINT=3,e.prototype.addCurve=function(t){if(null==t||void 0===t)throw"Cannot add null curve to bézier path.";this.bezierCurves.push(t),this.bezierCurves.length>1?(t.startPoint=this.bezierCurves[this.bezierCurves.length-2].endPoint,this.adjustSuccessorControlPoint(this.bezierCurves.length-2,!0,!0)):this.totalArcLength+=t.getLength()},e.prototype.locateCurveByStartPoint=function(t){for(var e in this.bezierCurves)if(this.bezierCurves[e].startPoint.equals(t))return e;return-1},e.prototype.locateCurveByStartControlPoint=function(t){for(var e in this.bezierCurves)if(this.bezierCurves[e].startControlPoint.equals(t))return e;return-1},e.prototype.locateCurveByEndControlPoint=function(t){for(var e in this.bezierCurves)if(this.bezierCurves[e].endControlPoint.equals(t))return e;return-1},e.prototype.getLength=function(){return this.totalArcLength},e.prototype.computeVerticalAreaSize=function(t,e){for(var i=this.computeBoundingBox().xMax,r=0,n=0;n<this.bezierCurves.length;n++)r+=this.bezierCurves[n].computeVerticalAreaSize(i,t,e);return r},e.prototype.computeVerticalRevolutionVolumeSize=function(t){for(var e=this.computeBoundingBox().xMax,i=0,r=0;r<this.bezierCurves.length;r++)i+=this.bezierCurves[r].computeVerticalRevolutionVolumeSize(e,t);return i},e.prototype.updateArcLengths=function(){this.totalArcLength=0;for(var t=0;t<this.bezierCurves.length;t++)this.bezierCurves[t].updateArcLengths(),this.totalArcLength+=this.bezierCurves[t].getLength()},e.prototype.getCurveCount=function(){return this.bezierCurves.length},e.prototype.getCurveAt=function(t){return this.bezierCurves[t]},e.prototype.removeEndPoint=function(){if(this.bezierCurves.length<=1)return!1;for(var t=[this.bezierCurves.length-1],e=0;e<this.bezierCurves.length-1;e++)t[e]=this.bezierCurves[e];return this.totalArcLength-=this.bezierCurves[this.bezierCurves.length-1].getLength(),this.bezierCurves=t,!0},e.prototype.removeStartPoint=function(){if(this.bezierCurves.length<=1)return!1;for(var t=[this.bezierCurves.length-1],e=1;e<this.bezierCurves.length;e++)t[e-1]=this.bezierCurves[e];return this.totalArcLength-=this.bezierCurves[0].getLength(),this.bezierCurves=t,!0},e.prototype.joinAt=function(t){if(t<0||t>=this.bezierCurves.length)return!1;var e=this.bezierCurves[t-1],i=this.bezierCurves[t],r=e.getStartControlPoint().clone();r.sub(e.getStartPoint()),r.multiplyScalar(2),r.add(e.getStartPoint());var n=i.getEndControlPoint().clone();n.sub(i.getEndPoint()),n.multiplyScalar(2),n.add(i.getEndPoint());for(var s=new IKRS.CubicBezierCurve(e.getStartPoint(),i.getEndPoint(),r,n),o=[this.bezierCurves.length-1],a=0;a<t-1;a++)o[a]=this.bezierCurves[a];o[t-1]=s;for(a=t;a+1<this.bezierCurves.length;a++)o[a]=this.bezierCurves[a+1];return this.bezierCurves=o,this.updateArcLengths(),!0},e.prototype.splitAt=function(t,e){if(t<0||t>=this.bezierCurves.length)return!1;var i=this.bezierCurves[t];if(e<1||e-1>=i.segmentCache.length)return!1;for(var r=this.bezierCurves.length;r>t;r--)this.bezierCurves[r]=this.bezierCurves[r-1];for(var n=0,s=0;s<e;s++)n+=i.segmentLengths[s];var o=i.getTangentAt(n);o=o.multiplyScalar(.25);var a=i.segmentCache[e].clone();a.sub(o);var h=i.segmentCache[e].clone();h.add(o);var u=i.getStartControlPoint().clone();u.sub(i.getStartPoint()),u.multiplyScalar(.25),u.add(i.getStartPoint());var l=i.getEndControlPoint().clone();l.sub(i.getEndPoint()),l.multiplyScalar(.25),l.add(i.getEndPoint());var c=new CubicBezierCurve(i.getStartPoint(),i.segmentCache[e],u,a),d=new CubicBezierCurve(i.segmentCache[e],i.getEndPoint(),h,l);return this.bezierCurves[t]=c,this.bezierCurves[t+1]=d,this.totalArcLength-=i.getLength(),this.totalArcLength+=c.getLength(),this.totalArcLength+=d.getLength(),!0},e.prototype.translate=function(t){for(var e=0;e<this.bezierCurves.length;e++){(i=this.bezierCurves[e]).getStartPoint().add(t),i.getStartControlPoint().add(t),i.getEndControlPoint().add(t)}var i;(i=this.bezierCurves[this.bezierCurves.length-1]).getEndPoint().add(t),this.updateArcLengths()},e.prototype.scale=function(t,i){for(var r=0;r<this.bezierCurves.length;r++){var n=this.bezierCurves[r];e._scalePoint(n.getStartPoint(),t,i),e._scalePoint(n.getStartControlPoint(),t,i),e._scalePoint(n.getEndControlPoint(),t,i)}this.bezierCurves.length>0&&e._scalePoint(this.bezierCurves[this.bezierCurves.length-1].getEndPoint(),t,i),this.updateArcLengths()},e._scalePoint=function(t,e,i){t.sub(e),t.setX(t.x*i.x),t.setY(t.y*i.y),t.add(e)},e.prototype.getPointAt=function(t){if(t<0||t>this.totalArcLength)return console.log("[IKRS.BezierPath.getPointAt(u)] u is out of bounds: "+t+"."),null;for(var e=0,i=0;e<this.bezierCurves.length&&i+this.bezierCurves[e].getLength()<t;)i+=this.bezierCurves[e].getLength(),e++;if(e>=this.bezierCurves.length)return this.bezierCurves[this.bezierCurves.length-1].getEndPoint().clone();var r=t-i;return this.bezierCurves[e].getPointAt(r)},e.prototype.getPoint=function(t){return this.getPointAt(t*this.totalArcLength)},e.prototype.getTangent=function(t){return this.getTangentAt(t*this.totalArcLength)},e.prototype.getTangentAt=function(t){if(t<0||t>this.totalArcLength)return console.warn("[BezierPath.getTangentAt(u)] u is out of bounds: "+t+"."),null;for(var e=0,i=0;e<this.bezierCurves.length&&i+this.bezierCurves[e].getLength()<t;)i+=this.bezierCurves[e].getLength(),e++;var r=t-i;return this.bezierCurves[e].getTangentAt(r)},e.prototype.getPerpendicular=function(t){return this.getPerpendicularAt(t*this.totalArcLength)},e.prototype.getPerpendicularAt=function(t){if(t<0||t>this.totalArcLength)return console.log("[IKRS.BezierPath.getPerpendicularAt(u)] u is out of bounds: "+t+"."),null;for(var e=0,i=0;e<this.bezierCurves.length&&i+this.bezierCurves[e].getLength()<t;)i+=this.bezierCurves[e].getLength(),e++;var r=t-i;return this.bezierCurves[e].getPerpendicularAt(r)},e.prototype.computeBoundingBox=function(){if(0==this.bezierCurves.length)return new BoundingBox(0,0,0,0);for(var t=this.bezierCurves[0].computeBoundingBox(),e=1;e<this.bezierCurves.length;e++){var i=this.bezierCurves[e].computeBoundingBox();t.xMin=Math.min(t.xMin,i.xMin),t.xMax=Math.max(t.xMax,i.xMax),t.yMin=Math.min(t.yMin,i.yMin),t.yMax=Math.max(t.yMax,i.yMax)}return t},e.prototype.moveCurvePoint=function(t,e,i){if(this.getCurveAt(t).moveCurvePoint(e,i,!0,!0),e==this.START_POINT&&(t>0||this.adjustCircular))this.getCurveAt(t-1<0?this.bezierCurves.length+(t-1):t-1).moveCurvePoint(this.END_CONTROL_POINT,i,!0,!1);else if(e==this.END_POINT&&(t+1<this.bezierCurves.length||this.adjustCircular)){this.getCurveAt((t+1)%this.bezierCurves.length).moveCurvePoint(this.START_CONTROL_POINT,i,!0,!1)}else e==this.START_CONTROL_POINT&&t>0?this.adjustPredecessorControlPoint(t,!0,!1):e==this.END_CONTROL_POINT&&t+1<this.getCurveCount()&&this.adjustSuccessorControlPoint(t,!0,!1);this.updateArcLengths()},e.prototype.adjustPredecessorControlPoint=function(t,e,i){if(!this.adjustCircular&&t<=0)return!1;var r=this.getCurveAt(t),n=this.getCurveAt(t-1<0?this.getCurveCount()+(t-1):t-1);return this.adjustNeighbourControlPoint(r,n,r.getStartPoint(),r.getStartControlPoint(),n.getEndPoint(),n.getEndControlPoint(),e,i)},e.prototype.adjustSuccessorControlPoint=function(t,e,i){if(!this.adjustCirculat&&t+1>this.getCurveCount())return!1;var r=this.getCurveAt(t),n=this.getCurveAt((t+1)%this.getCurveCount());return this.adjustNeighbourControlPoint(r,n,r.getEndPoint(),r.getEndControlPoint(),n.getStartPoint(),n.getStartControlPoint(),e,i)},e.prototype.adjustNeighbourControlPoint=function(t,e,i,r,n,s,o,a){var h=new Vertex(r.x-i.x,r.y-i.y),u=new Vertex(s.x-n.x,s.y-n.y),l=Math.sqrt(Math.pow(h.x,2)+Math.pow(h.y,2)),c=Math.sqrt(Math.pow(u.x,2)+Math.pow(u.y,2));l<=.1||(s.set(n.x-h.x*(c/l),n.y-h.y*(c/l)),e.updateArcLengths())},e.prototype.clone=function(){for(var t=new e(null),i=0;i<this.bezierCurves.length;i++)t.bezierCurves.push(this.bezierCurves[i].clone()),i>0&&(t.bezierCurves[i-1].endPoint=t.bezierCurves[i].startPoint);return t.updateArcLengths(),t},e.prototype.equals=function(t){if(!t)return!1;if(!t.bezierCurves)return!1;if(void 0===t.bezierCurves.length)return!1;if(t.bezierCurves.length!=this.bezierCurves.length)return!1;for(var e=0;e<this.bezierCurves.length;e++)if(!this.bezierCurves[e].equals(t.bezierCurves[e]))return!1;return!0},e.prototype.toSVGString=function(t){t=t||{};var e=[];e.push("<path"),t.className&&e.push(' class="'+t.className+'"'),e.push(' d="');for(var i=0;i<this.bezierCurves.length;i++)i>0&&e.push(" "),e.push(this.bezierCurves[i].toSVGPathData());return e.push('" />'),e.join("")},e.prototype.toJSON=function(t){var e=[];e.push("[");for(var i=0;i<this.bezierCurves.length;i++)i>0&&e.push(","),t?e.push("\n\t"):e.push(" "),e.push(this.bezierCurves[i].toJSON(t));return 0!=this.bezierCurves.length&&e.push(" "),e.push("]"),e.join("")},e.fromJSON=function(t){var e=JSON.parse(t);return IKRS.BezierPath.fromArray(e)},e.fromArray=function(t){if(!Array.isArray(t))throw"[IKRS.BezierPath.fromArray] Passed object must be an array.";if(t.length<1)throw"[IKRS.BezierPath.fromArray] Passed array must contain at least one bezier curve (has "+t.length+").";for(var i=new e(null),r=null,n=0;n<t.length;n++){var s=null;s=0 in t[n]&&1 in t[n]&&2 in t[n]&&3 in t[n]?CubicBezierCurve.fromArray(t[n]):CubicBezierCurve.fromObject(t[n]),r&&(s.startPoint=r.endPoint),i.bezierCurves.push(s),i.totalArcLength+=s.getLength(),r=s}return i},e.prototype.toReducedListRepresentation=function(t){void 0===t&&(t=1);var i=[];i.push("[");for(var r=0;r<this.bezierCurves.length;r++){var n=this.bezierCurves[r];i.push(e._roundToDigits(n.getStartPoint().x,t,!1)),i.push(","),i.push(e._roundToDigits(n.getStartPoint().y,t,!1)),i.push(","),i.push(e._roundToDigits(n.getStartControlPoint().x,t,!1)),i.push(","),i.push(IKRS.BezierPath._roundToDigits(n.getStartControlPoint().y,t,!1)),i.push(","),i.push(e._roundToDigits(n.getEndControlPoint().x,t,!1)),i.push(","),i.push(e._roundToDigits(n.getEndControlPoint().y,t,!1)),i.push(",")}if(0!=this.bezierCurves.length){n=this.bezierCurves[this.bezierCurves.length-1];i.push(e._roundToDigits(n.getEndPoint().x,t,!1)),i.push(","),i.push(e._roundToDigits(n.getEndPoint().y,t,!1))}return i.push("]"),i.join("")},e.fromReducedListRepresentation=function(t){var i=JSON.parse(t);if(!i.length)throw console.log("Cannot parse bezier path from non-array object nor from empty point list."),"Cannot parse bezier path from non-array object nor from empty point list.";if(i.length<8)throw console.log("Cannot build bezier path. The passed array must contain at least 8 elements (numbers)."),"Cannot build bezier path. The passed array must contain at least 8 elements (numbers).";var r=new e(null),n=null,s=null,o=null,a=null,h=0;do{0==h&&(n=new Vertex(i[h],i[h+1])),s=new Vertex(i[h+2],i[h+3]),o=new Vertex(i[h+4],i[h+5]),a=new Vertex(i[h+6],i[h+7]);var u=new CubicBezierCurve(n,a,s,o);r.bezierCurves.push(u),n=a,h+=6}while(h+2<i.length);return r.updateArcLengths(),r},e._roundToDigits=function(t,e,i){if(e<=0)return Math.round(t);var r=Math.pow(10,e),n=""+(t=Math.round(t*r))/r,s=n.lastIndexOf(".");if(-1==s&&(s=n.length),i)for(var o=i-(n.length-s-1);o-- >0;)n+="&nbsp;";return n},t.BezierPath=e}(window)},function(t,e,i){(function(t){var e;(e=window||t.export).Polygon=function(t,e){void 0===t&&(t=[]),this.vertices=t,this.isOpen=e},e.Polygon.prototype.containsVert=function(t){for(var e=!1,i=0,r=this.vertices.length-1;i<this.vertices.length;r=i++){var n=this.vertices[i].x,s=this.vertices[i].y,o=this.vertices[r].x,a=this.vertices[r].y;s>t.y!=a>t.y&&t.x<(o-n)*(t.y-s)/(a-s)+n&&(e=!e)}return e},e.Polygon.prototype.toQuadraticBezierData=function(){if(this.vertices.length<3)return[];var t=[],e=this.vertices[0],i=this.vertices[1],r=new Vertex(e.x+(i.x-e.x)/2,e.y+(i.y-e.y)/2);t.push(r);for(var n=this.isOpen?this.vertices.length:this.vertices.length+1,s=1;s<n;s++)e=this.vertices[s%this.vertices.length],i=this.vertices[(s+1)%this.vertices.length],r=new Vertex(e.x+(i.x-e.x)/2,e.y+(i.y-e.y)/2),t.push(e),t.push(r),e=i;return t},e.Polygon.prototype.toQuadraticBezierSVGString=function(){var t=this.toQuadraticBezierData();if(0==t.length)return"";for(var e=["M "+t[0].x+" "+t[0].y],i=1;i<t.length;i+=2)e.push("Q "+t[i].x+" "+t[i].y+", "+t[i+1].x+" "+t[i+1].y);return e.join(" ")},e.Polygon.prototype.toCubicBezierData=function(t){if(void 0===t&&(t=1),this.vertices.length<3)return[];var e=[],i=this.vertices[0],r=this.vertices[1],n=new Vertex(i.x+(r.x-i.x)/2,i.y+(r.y-i.y)/2);e.push(n);for(var s=this.isOpen?this.vertices.length-1:this.vertices.length,o=0;o<s;o++){i=this.vertices[o%this.vertices.length],r=this.vertices[(o+1)%this.vertices.length];var a=this.vertices[(o+2)%this.vertices.length],h=new Vertex(i.x+(r.x-i.x)/2,i.y+(r.y-i.y)/2),u=new Vertex(r.x+(a.x-r.x)/2,r.y+(a.y-r.y)/2),l=new Vertex(h.x+(r.x-h.x)*t,h.y+(r.y-h.y)*t),c=new Vertex(u.x+(r.x-u.x)*t,u.y+(r.y-u.y)*t);e.push(l),e.push(c),e.push(u)}return e},e.Polygon.prototype.toCubicBezierSVGString=function(t){var e=this.toCubicBezierData(t);if(0==e.length)return"";for(var i=["M "+e[0].x+" "+e[0].y],r=1;r<e.length;r+=3)i.push("C "+e[r].x+" "+e[r].y+", "+e[r+1].x+" "+e[r+1].y+", "+e[r+2].x+" "+e[r+2].y);return i.join(" ")},e.Polygon.prototype.toSVGString=function(t){t=t||{};var e=[];if(e.push("<path"),t.className&&e.push(' class="'+t.className+'"'),e.push(' d="'),this.vertices.length>0){e.push("M "),e.push(this.vertices[0].x),e.push(" "),e.push(this.vertices[0].y);for(var i=1;i<this.vertices.length;i++)e.push(" L "),e.push(this.vertices[i].x),e.push(" "),e.push(this.vertices[i].y);this.isOpen||e.push(" Z")}return e.push('" />'),e.join("")}}).call(this,i(0)(t))},function(t,e,i){(function(t){var e,i;e=window||t.export,(i=function(t,e){this.center=t,this.axis=e}).prototype.toSVGString=function(t){t=t||{};var e=[];return e.push("<ellipse"),t.className&&e.push(' class="'+t.className+'"'),e.push(' cx="'+this.center.x+'"'),e.push(' cy="'+this.center.y+'"'),e.push(' rx="'+this.axis.x+'"'),e.push(' ry="'+this.axis.y+'"'),e.push(" />"),e.join("")},e.VEllipse=i}).call(this,i(0)(t))},function(t,e){!function(t){window.MouseHandler=function(t){var e=null,i=null,r=-1,n={},s={},o={};function a(t){return{x:t.pageX-t.target.offsetLeft,y:t.pageY-t.target.offsetTop}}function h(n,s){var o=a(n);return n.params={element:t,name:s,pos:o,button:r,leftButton:0==r,middleButton:1==r,rightButton:2==r,mouseDownPos:e,draggedFrom:i,wasDragged:null!=e&&(e.x!=o.x||e.y!=o.y),dragAmount:null!=e?{x:o.x-i.x,y:o.y-i.y}:{x:0,y:0}},n}function u(e){console.log(e),s[e]||(t.addEventListener(e,o[e]),s[e]=!0)}function l(e){s[e]&&(t.removeEventListener(e,o[e]),delete s[e])}function c(t){throw"This MouseHandler already has a '"+t+"' callback. To keep the code simple there is only room for one."}o.mousemove=function(t){n.mousemove&&n.mousemove(h(t,"mousemove")),i&&n.drag&&n.drag(h(t,"drag")),e&&(i=a(t))},o.mouseup=function(t){n.mouseup&&n.mouseup(h(t,"mouseup")),i=null,e=null,r=-1},o.mousedown=function(t){i=a(t),e=a(t),r=t.button,n.mousedown&&n.mousedown(h(t,"mousedown"))},o.click=function(t){n.click&&n.click(h(t,"mousedown"))},o.wheel=function(t){n.wheel&&n.wheel(h(t,"wheel"))},this.drag=function(t){if(n.drag)throw"This MouseHandler already has a 'drag' callback.";return n.drag=t,u("mousedown"),u("mousemove"),u("mouseup"),n.drag=t,this},this.move=function(t){return n.mousemove&&c("mousemove"),u("mousemove"),n.mousemove=t,this},this.up=function(t){return n.mouseup&&c("mouseup"),u("mouseup"),n.mouseup=t,this},this.down=function(t){return n.mousedown&&c("mousedown"),u("mousedown"),n.mousedown=t,this},this.click=function(t){return n.click&&c("click"),u("click"),n.click=t,this},this.wheel=function(t){return n.wheel&&c("wheel"),u("wheel"),n.wheel=t,this},this.destroy=function(){console.log("destroy"),l("mousedown"),l("mousemove"),l("moseup"),l("click"),l("wheel")}}}()},function(t,e){!function(t){"use strict";var e=function(t){t=t||{},this.element=t.element?t.element:window,this.downListeners=[],this.pressListeners=[],this.upListeners=[],this.keyStates=[],this.trackAllKeys=t.trackAll||!1,this._keyDownListener=null,this._keyPressListener=null,this._keyUpListener=null,this.installListeners()},i=function(t,e){var i=!1;for(var r in e){var n=e[r];n.keyCode==t.keyCode&&(n.listener(t),i=!0)}return i},r=function(t){if("number"==typeof t)return t;if("string"!=typeof t)throw"Unknown key name or key type (should be a string or integer): "+t;if(e.KEY_CODES[t])return e.KEY_CODES[t];throw"Unknown key (cannot resolve key code): "+t};e.KEY_CODES={break:3,backspace:8,delete:8,tab:9,clear:12,enter:13,shift:16,ctrl:17,alt:18,pause:19,break:19,capslock:20,hangul:21,hanja:25,escape:27,conversion:28,"non-conversion":29,spacebar:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,select:41,print:42,execute:43,printscreen:44,insert:45,delete:46,help:47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,"semicolon (firefox)":59,equals:59,"<":60,"equals (firefox)":61,"ß":63,"@ (firefox)":64,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,windows:91,leftcommand:91,chromebooksearch:91,rightwindowkey:92,windowsmenu:93,rightcommant:93,sleep:95,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,numpadperiod:108,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,f13:124,f14:125,f15:126,f16:127,f17:128,f18:129,f19:130,f20:131,f21:132,f22:133,f23:134,f24:135,numlock:144,scrolllock:145,"^":160,"!":161,"#":163,$:164,"ù":165,pagebackward:166,pageforward:167,refresh:168,closingparen:169,"*":170,"~+*":171,home:172,minus:173,mute:173,unmute:173,decreasevolumelevel:174,increasevolumelevel:175,next:176,previous:177,stop:178,"play/pause":179,email:180,mute:181,unmute:181,semicolon:186,"ñ":186,equal:187,comma:188,dash:189,period:190,forwardslash:191,"ç":191,"grave accent":192,"æ":192,"ö":192,"?":193,"/":193,"°":193,numpadperiod:194,openbracket:219,backslash:220,closebracket:221,"å":221,singlequote:222,"ø":222,"ä":222,"`":223,altgr:225,"GNOME Compose Key":230,"ç":231,XF86Forward:233,XF86Back:234,"non-conversion":235,alphanumeric:240,hiragana:242,katakana:242,"half-width":243,"full-width":243,kanji:244,unlocktrackpad:251,toggletouchpad:255},e.prototype.installListeners=function(){var t=this;this.element.addEventListener("keydown",this.keyDownListener=function(e){!function(t,e){(i(t,e.downListeners)||e.trackAllKeys)&&(e.keyStates[t.keyCode]="down")}(e,t)}),this.element.addEventListener("keypress",this.keyPressListener=function(e){!function(t,e){i(t,e.pressListeners)}(e,t)}),this.element.addEventListener("keyup",this.keyUpListener=function(e){!function(t,e){(i(t,e.upListeners)||e.trackAllKeys)&&delete e.keyStates[t.keyCode]}(e,t)})},e.prototype.releaseListeners=function(){this.element.removeEventListener("keydown",this.keyDownListener),this.element.removeEventListener("keypress",this.keyPressListener),this.element.removeEventListener("keyup",this.keyUpListener)},e.prototype.down=function(t,e){return this.downListeners.push({key:t,keyCode:r(t),listener:e}),this},e.prototype.press=function(t,e){return this.pressListeners.push({key:t,keyCode:r(t),listener:e}),this},e.prototype.up=function(t,e){return this.upListeners.push({key:t,keyCode:r(t),listener:e}),this},e.prototype.isDown=function(t){return!!this.keyStates[r(t)]},t.KeyHandler=e}(window)},function(t,e,i){(function(t){!function(t){"use strict";t.drawutils=function(t,e){this.ctx=t,this.offset=new Vertex(0,0),this.scale=new Vertex(1,1),this.fillShapes=e},t.drawutils.prototype.line=function(t,e,i){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+e.x*this.scale.x,this.offset.y+e.y*this.scale.y),this.ctx.strokeStyle=i,this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.restore()},t.drawutils.prototype._fillOrDraw=function(t){this.fillShapes?(this.ctx.fillStyle=t,this.ctx.fill()):(this.ctx.strokeStyle=t,this.ctx.stroke())},t.drawutils.prototype.cubicBezier=function(t,e,i,r,n){t instanceof CubicBezierCurve?this.cubicBezier(t.startPoint,t.endPoint,t.startControlPoint,t.endControlPoint,e):(this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y),this.ctx.bezierCurveTo(this.offset.x+i.x*this.scale.x,this.offset.y+i.y*this.scale.y,this.offset.x+r.x*this.scale.x,this.offset.y+r.y*this.scale.y,this.offset.x+e.x*this.scale.x,this.offset.y+e.y*this.scale.y),this.ctx.lineWidth=2,this._fillOrDraw(n),this.ctx.restore())},t.drawutils.prototype.handle=function(t,e){this.point(t,"rgb(0,32,192)"),this.square(e,5,"rgba(0,128,192,0.5)")},t.drawutils.prototype.cubicBezierCurveHandleLines=function(t){this.cubicBezierHandleLines(t.startPoint,t.endPoint,t.startControlPoint,t.endControlPoint)},t.drawutils.prototype.handleLine=function(t,e){this.line(t,e,"rgb(192,192,192)")},t.drawutils.prototype.point=function(t,e){this.ctx.beginPath(),this.ctx.arc(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,3,0,2*Math.PI,!1),this.ctx.closePath(),this._fillOrDraw(e)},t.drawutils.prototype.circle=function(t,e,i){this.ctx.beginPath(),this.ctx.ellipse(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,e*this.scale.x,e*this.scale.y,0,0,2*Math.PI),this.ctx.closePath(),this._fillOrDraw(i)},t.drawutils.prototype.ellipse=function(t,e,i,r){this.ctx.beginPath(),this.ctx.ellipse(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,e*this.scale.x,i*this.scale.y,0,0,2*Math.PI),this.ctx.closePath(),this._fillOrDraw(r)},t.drawutils.prototype.square=function(t,e,i){this.ctx.beginPath(),this.ctx.rect(this.offset.x+(t.x-e/2)*this.scale.x,this.offset.y+(t.y-e/2)*this.scale.y,e*this.scale.x,e*this.scale.y),this.ctx.closePath(),this._fillOrDraw(i)},t.drawutils.prototype.grid=function(t,e,i,r,n,s){console.log("draw grid"),this.ctx.beginPath();for(var o=0;o<e/2;)this.ctx.moveTo(this.offset.x+(t.x+o)*this.scale.x,this.offset.y-(t.y-.5*i)*this.scale.y),this.ctx.lineTo(this.offset.x+(t.x+o)*this.scale.x,this.offset.y-(t.y+.5*i)*this.scale.y),o+=r;for(o=r;o<e/2;)this.ctx.moveTo(this.offset.x+(t.x-o)*this.scale.x,this.offset.y-(t.y-.5*i)*this.scale.y),this.ctx.lineTo(this.offset.x+(t.x-o)*this.scale.x,this.offset.y-(t.y+.5*i)*this.scale.y),o+=r;for(var a=0;a<i/2;)this.ctx.moveTo(this.offset.x-(t.x-.5*e)*this.scale.x,this.offset.y+(t.y+a)*this.scale.y),this.ctx.lineTo(this.offset.x-(t.x+.5*e)*this.scale.x,this.offset.y+(t.y+a)*this.scale.y),a+=n;for(a=n;a<i/2;)this.ctx.moveTo(this.offset.x-(t.x-.5*e)*this.scale.x,this.offset.y+(t.y-a)*this.scale.y),this.ctx.lineTo(this.offset.x-(t.x+.5*e)*this.scale.x,this.offset.y+(t.y-a)*this.scale.y),a+=n;this.ctx.closePath(),this._fillOrDraw(s)},t.drawutils.prototype.raster=function(t,e,i,r,n,s){this.ctx.save(),this.ctx.beginPath();for(var o=0,a=-Math.ceil(.5*e/r)*r;a<e/2;a+=r){o++;for(var h=-Math.ceil(.5*i/n)*n;h<i/2;h+=n)1==o&&0,this.ctx.moveTo(this.offset.x+(t.x+a)*this.scale.x-4,this.offset.y+(t.y+h)*this.scale.y),this.ctx.lineTo(this.offset.x+(t.x+a)*this.scale.x+4,this.offset.y+(t.y+h)*this.scale.y),this.ctx.moveTo(this.offset.x+(t.x+a)*this.scale.x,this.offset.y+(t.y+h)*this.scale.y-4),this.ctx.lineTo(this.offset.x+(t.x+a)*this.scale.x,this.offset.y+(t.y+h)*this.scale.y+4)}this.ctx.strokeStyle=s,this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()},t.drawutils.prototype.diamondHandle=function(t,e,i){this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x-e/2,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y-e/2),this.ctx.lineTo(this.offset.x+t.x*this.scale.x+e/2,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y+e/2),this.ctx.closePath(),this._fillOrDraw(i)},t.drawutils.prototype.squareHandle=function(t,e,i){this.ctx.beginPath(),this.ctx.rect(this.offset.x+t.x*this.scale.x-e/2,this.offset.y+t.y*this.scale.y-e/2,e,e),this.ctx.closePath(),this._fillOrDraw(i)},t.drawutils.prototype.crosshair=function(t,e,i){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x-e,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+t.x*this.scale.x+e,this.offset.y+t.y*this.scale.y),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y-e),this.ctx.lineTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y+e),this.ctx.strokeStyle=i,this.ctx.lineWidth=.5,this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()},t.drawutils.prototype.polygon=function(t,e){if(!(t.vertices.length<=1)){this.ctx.save(),this.ctx.beginPath(),this.ctx.setLineDash([3,5]),this.ctx.lineWidth=1,this.ctx.moveTo(this.offset.x+t.vertices[0].x*this.scale.x,this.offset.y+t.vertices[0].y*this.scale.y);for(var i=0;i<t.vertices.length;i++)this.ctx.lineTo(this.offset.x+t.vertices[i].x*this.scale.x,this.offset.y+t.vertices[i].y*this.scale.y);!t.isOpen&&t.vertices.length>2&&this.ctx.closePath(),this._fillOrDraw(e),this.ctx.setLineDash([]),this.ctx.restore()}},t.drawutils.prototype.text=function(t,e,i,r){r=r||{},this.fillShapes?(this.ctx.fillStyle="black",this.ctx.fillText(t,e,i)):(this.ctx.strokeStyle="black",this.ctx.strokeText(t,e,i))},t.drawutils.prototype.label=function(t,e,i){this.fillShapes?(this.ctx.fillStyle="black",this.ctx.fillText(t,e,i)):(this.ctx.strokeStyle="black",this.ctx.strokeText(t,e,i))}}(window||t.export)}).call(this,i(0)(t))},function(t,e){!function(t){"use strict";var e=function(t){this.wrapper=document.getElementById(t),this.blanket=this.wrapper.getElementsByClassName("overlay-blanket")[0],this.content=this.blanket.getElementsByClassName("overlay-content")[0],r(this.wrapper,{display:"none",position:"fixed",left:"0px",top:"0px",width:"100vw",height:"100vh"}),r(this.blanket,{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",background:"rgba(0,0,0,0.5)"}),r(this.content,{width:"500px",height:"500px","max-width":"50%","max-height":"50%",background:"white",border:"1px solid grey","border-radius":"5px",position:"relative"}),this._headLine=document.createElement("h3"),this._contentNode=document.createElement("div"),this._buttonLine=document.createElement("div"),this.content.innerHTML="",this.content.appendChild(this._headLine),this.content.appendChild(this._contentNode),this.content.appendChild(this._buttonLine),this._textArea=null,r(this._headLine,{width:"calc(100% - 10px)",overflow:"hidden","border-bottom":"1px solid grey",margin:"6px 0px",padding:"0px 5px 3px"}),r(this._contentNode,{width:"calc(100% - 10px)",overflow:"hidden",margin:"0px",padding:"0px 5px",position:"absolute",top:"30px",height:"calc(100% - 60px)"}),r(this._buttonLine,{width:"calc(100% - 10px)",overflow:"hidden",position:"absolute",top:"auto",bottom:"0px","text-align":"right"}),s(this._headLine,"od-hl"),s(this._contentNode,"od-cn"),s(this._buttonLine,"od-bl")};function i(t,e){if("string"==typeof e&&"close"==e)i(t,{label:"Close",onclick:function(){n(t)}});else if("string"==typeof e&&"ok"==e)console.log("add ok button"),i(t,{label:"OK",onclick:function(){n(t)}});else{var r=document.createElement("button");r.type="button",r.innerHTML=e.label?e.label:"no-label","function"==typeof e.action?r.addEventListener("click",e.action):"close"==e.action&&r.addEventListener("click",function(){n(t)}),t._buttonLine.appendChild(r)}}function r(t,e){for(var i in e)t.style[i]=e[i]}function n(t){t.wrapper.style.display="none"}function s(t,e){var i=t.className.split(" ");-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" "))}e.prototype.show=function(t,e,r,n){if(this._headLine.innerHTML=e||"Please confirm",this.setMessage(t,n),this._buttonLine.innerHTML="",r)for(var s in r)i(this,r[s]);else i(this,"ok");this.wrapper.style.display="inherit"},e.prototype.setMessage=function(t,e){e={}||e,"string"==typeof t?(this._contentNode.innerHTML=t,e.messageClass&&s(this._contentNode,e.messageClass)):(this._contentNode.innerHTML="",this._contentNode.appendChild(t))},e.prototype.showTextArea=function(t,e,i,r){this._textArea=document.createElement("textarea"),this._textArea.innerHTML=t||"",this._textArea.style.width="100%",this._textArea.style.height="95%",this._textArea.style.border="0px",r&&r.messageClass&&(this._textArea.className=r.messageClass),this.show(this._textArea,e,i,r)},e.prototype.hide=function(){n(this)},t.overlayDialog=e}(window)},function(t,e){!function(t){"use strict";!function(t){var e=function(t,e){this.item=t,this.type=e,this.vindex=null,this.pindex=null,this.cindex=null};e.VERTEX="vertex",e.prototype.isVertex=function(){return this.type==e.VERTEX},e.prototype.setVIndex=function(t){return this.vindex=t,this},t.Draggable=e}(t),VertexAttr.model={bezierAutoAdjust:!1,renderTime:0};var e=function(i){this.config={fullSize:!0,fitToParent:!0,scaleX:1,scaleY:1,rasterGrid:!0,backgroundColor:"#ffffff",rebuild:function(){s()},loadImage:function(){var t=document.getElementById("file");t.setAttribute("data-type","image-upload"),t.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))},saveFile:function(){n()}},this.canvas=document.getElementById("my-canvas"),this.ctx=this.canvas.getContext("2d"),this.draw=new drawutils(this.ctx,!1),this.draw.scale.set(this.config.scaleX,this.config.scaleY),this.fill=new drawutils(this.ctx,!0),this.fill.scale.set(this.config.scaleX,this.config.scaleY),this.grid=new Grid(new Vertex(0,0),new Vertex(50,50)),this.image=null,this.imageBuffer=null,this.canvasSize={width:1024,height:768},this.vertices=[],this.selectPolygon=null,this.draggedElements=[],this.drawables=[];var r=this;e.prototype.initDrawableObjects=function(){var t=Math.min(r.canvasSize.width,r.canvasSize.height)/3,e=[];e[0]=[new Vertex(0,-t),new Vertex(t,0),new Vertex(.5*t,-t),new Vertex(.5*t,0)],e[1]=[e[0][1],new Vertex(0,t),new Vertex(t,.5*t),new Vertex(0,.5*t)],e[2]=[e[1][1],new Vertex(-t,0),new Vertex(.5*-t,t),new Vertex(.5*-t,0)],e[3]=[e[2][1],e[0][0],new Vertex(-t,.5*-t),new Vertex(0,.5*-t)],this.vertices=[];var i=BezierPath.fromArray(e);for(var n in i.adjustCircular=!0,this.drawables.push(i),e)this.vertices.push(e[n][0]),this.vertices.push(e[n][1]),this.vertices.push(e[n][2]),this.vertices.push(e[n][3]);for(var n in i.bezierCurves)i.bezierCurves[n].startPoint.listeners.addDragListener(function(t){var e=i.locateCurveByStartPoint(t.params.vertex);i.bezierCurves[e].startPoint.addXY(-t.params.dragAmount.x,-t.params.dragAmount.y),i.moveCurvePoint(1*e,i.START_POINT,t.params.dragAmount)}),i.bezierCurves[n].startControlPoint.listeners.addDragListener(function(t){var e=i.locateCurveByStartControlPoint(t.params.vertex);i.bezierCurves[e].startPoint.attr.bezierAutoAdjust&&i.adjustPredecessorControlPoint(1*e,!0,!0)}),i.bezierCurves[n].endControlPoint.listeners.addDragListener(function(t){var e=i.locateCurveByEndControlPoint(t.params.vertex);i.bezierCurves[e%i.bezierCurves.length].endPoint.attr.bezierAutoAdjust&&i.adjustSuccessorControlPoint(1*e,!0,!0)});var s=new VEllipse(new Vertex(0,0),new Vertex(60,60));this.vertices.push(s.center),this.vertices.push(s.axis),this.drawables.push(s),s.center.listeners.addDragListener(function(t){s.axis.add(t.params.dragAmount)});var o=[new Vertex(-32,-32),new Vertex(32,-32),new Vertex(32,32),new Vertex(-32,32)],a=new Polygon(o);for(var n in this.drawables.push(a),o)this.vertices.push(o[n])},e.prototype.redraw=function(){var t=(new Date).getTime();this.ctx.fillStyle=this.config.backgroundColor,this.ctx.fillRect(0,0,this.canvasSize.width,this.canvasSize.height),this.config.rasterGrid?this.draw.raster(this.grid.center,(this.canvasSize.width+this.draw.offset.x)/this.draw.scale.x,(this.canvasSize.height+this.draw.offset.y)/this.draw.scale.y,this.grid.size.x,this.grid.size.y,"rgba(0,128,255,0.125)"):this.draw.grid(this.grid.center,(this.canvasSize.width+this.draw.offset.x)/this.draw.scale.x,(this.canvasSize.height+this.draw.offset.y)/this.draw.scale.y,this.grid.size.x,this.grid.size.y,"rgba(0,128,255,0.095)"),r.image&&(r.config.fitImage?r.ctx.drawImage(r.image,0,0,r.image.width,r.image.height,0,0,r.canvasSize.width,r.canvasSize.height):r.ctx.drawImage(r.image,0,0));var e=Math.min(r.canvasSize.width,r.canvasSize.height)/3;for(var i in r.draw.circle({x:0,y:0},e,"#000000"),this.drawables){var n=this.drawables[i];if(n instanceof BezierPath)for(var s in n.bezierCurves)this.draw.cubicBezier(n.bezierCurves[s].startPoint,n.bezierCurves[s].endPoint,n.bezierCurves[s].startControlPoint,n.bezierCurves[s].endControlPoint,"#00a822"),n.bezierCurves[s].startPoint.attr.bezierAutoAdjust||(this.draw.diamondHandle(n.bezierCurves[s].startPoint,7,"orange"),n.bezierCurves[s].startPoint.attr.renderTime=t),n.bezierCurves[s].endPoint.attr.bezierAutoAdjust||(this.draw.diamondHandle(n.bezierCurves[s].endPoint,7,"orange"),n.bezierCurves[s].endPoint.attr.renderTime=t),this.draw.handleLine(n.bezierCurves[s].startPoint,n.bezierCurves[s].startControlPoint),this.draw.handleLine(n.bezierCurves[s].endPoint,n.bezierCurves[s].endControlPoint);else if(n instanceof Polygon)for(var i in this.draw.polygon(n,"#0022a8"),n.vertices);else n instanceof VEllipse?this.draw.ellipse(n.center,Math.abs(n.axis.x-n.center.x),Math.abs(n.axis.y-n.center.y),"#2222a8"):console.error("Cannot draw object. Unknown class "+n.constructor.name+".")}for(var i in this.vertices)this.vertices[i].attr.renderTime!=t&&this.draw.squareHandle(this.vertices[i],5,this.vertices[i].attr.isSelected?"rgba(192,128,0)":"rgb(0,128,192)");null!=this.selectPolygon&&this.selectPolygon.vertices.length>0&&(console.log("Drawing selectPolygon",this.selectPolygon.vertices.length,"vertices"),this.draw.polygon(this.selectPolygon,"#888888"),this.draw.crosshair(this.selectPolygon.vertices[0],3,"#008888"))};e.prototype.clearSelection=function(t){for(var e in this.vertices)this.vertices[e].attr.isSelected=!1;return t&&this.redraw(),this};document.getElementById("file").addEventListener("change",function(t){var e=document.getElementById("file").getAttribute("data-type");"image-upload"==e?function(t){if(-1!="image/gif,image/jpeg,image/jpg,image/gif,image/png".indexOf(t.target.files[0].type)||window.confirm("This seems not to be an image ("+t.target.files[0].type+"). Continue?")){var e=new FileReader;e.onload=function(t){this.image=new Image,this.image.onload=function(){var t=document.createElement("canvas");t.width=this.image.width,t.height=this.image.height,t.getContext("2d").drawImage(this.image,0,0,this.image.width,image.height),alert("Sorry, not yet implemented.")},this.image.src=t.target.result},e.readAsDataURL(t.target.files[0])}}(t):console.warn("Unrecognized upload type: "+e)});var n=function(){var t=(new SVGBuilder).build(r.drawables,{canvasSize:r.canvasSize,offset:r.draw.offset,zoom:r.draw.zoom}),e=new Blob([t],{type:"image/svg;charset=utf-8"});saveAs(e,"plot-boilerplate.svg")},s=function(){};e.prototype.resizeCanvas=function(){var t=function(t,e){r.ctx.canvas.width=t,r.ctx.canvas.height=e,r.canvas.width=t,r.canvas.height=e,r.canvasSize.width=t,r.canvasSize.height=e,r.draw.offset.x=r.fill.offset.x=t/2,r.draw.offset.y=r.fill.offset.y=e/2};if(r.config.fullSize&&!r.config.fitToParent)t(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);else if(r.config.fitToParent){t(r.canvas.parentNode.clientWidth-2,r.canvas.parentNode.clientHeight-2)}else t(1024,768);r.redraw()},t.addEventListener("resize",this.resizeCanvas),this.resizeCanvas(),e.prototype.selectVerticesInPolygon=function(t){for(var e in this.vertices)t.containsVert(this.vertices[e])&&(this.vertices[e].attr.isSelected=!0)};var o=function(t){for(var e in r.vertices){var i=r.vertices[e];if(i.distance(t)<7)return new Draggable(i,Draggable.VERTEX).setVIndex(e)}return!1};e.prototype.transformMousePosition=function(t,e){return{x:(t-this.draw.offset.x)/this.draw.scale.x,y:(e-this.draw.offset.y)/this.draw.scale.y}};new MouseHandler(this.canvas).down(function(t){if(1==t.which){var e=o(r.transformMousePosition(t.params.pos.x,t.params.pos.y));if(console.log(e),e){if("vertex"==e.type&&r.vertices[e.vindex].attr.isSelected)for(var i in r.vertices)r.vertices[i].attr.isSelected&&(r.draggedElements.push(new Draggable(r.vertices[i],Draggable.VERTEX).setVIndex(i)),r.vertices[i].listeners.fireDragStartEvent(t));else r.draggedElements.push(e),"bpath"==e.type?r.paths[e.pindex].bezierCurves[e.cindex].getPointByID(e.pid).listeners.fireDragStartEvent(t):"vertex"==e.type&&r.vertices[e.vindex].listeners.fireDragStartEvent(t);r.redraw()}}}).drag(function(t){if(a.isDown("ctrl"))r.draw.offset.add(t.params.dragAmount),r.fill.offset.set(r.draw.offset),r.redraw();else for(var e in t.params.dragAmount.x/=r.draw.scale.x,t.params.dragAmount.y/=r.draw.scale.y,r.draggedElements){var i=r.draggedElements[e];"bpath"==i.type?(r.paths[i.pindex].moveCurvePoint(i.cindex,i.pid,t.params.dragAmount),r.paths[i.pindex].bezierCurves[i.cindex].getPointByID(i.pid).listeners.fireDragEvent(t)):"vertex"==i.type&&(r.vertices[i.vindex].add(t.params.dragAmount),r.vertices[i.vindex].listeners.fireDragEvent(t))}r.redraw()}).up(function(t){if(1==t.which){for(var e in t.params.wasDragged||function(t,e){var i=o(r.transformMousePosition(t,e));if(i)if(a.isDown("shift")){if("bpath"==i.type){let t=r.paths[i.pindex].bezierCurves[i.cindex].getPointByID(i.pid);t.attr.isSelected=!t.attr.isSelected}else"vertex"==i.type&&(r.vertices[i.vindex].attr.isSelected=!r.vertices[i.vindex].attr.isSelected);r.redraw()}else a.isDown("y")&&(r.vertices[i.vindex].attr.bezierAutoAdjust=!r.vertices[i.vindex].attr.bezierAutoAdjust,console.log("bezierAutoAdjust="+r.vertices[i.vindex].attr.bezierAutoAdjust),r.redraw());else if(null!=r.selectPolygon){var n=r.transformMousePosition(t,e);r.selectPolygon.vertices.push(n),r.redraw()}}(t.params.pos.x,t.params.pos.y),r.draggedElements){var i=r.draggedElements[e];"bpath"==i.type?r.paths[i.pindex].bezierCurves[i.cindex].getPointByID(i.pid).listeners.fireDragEndEvent(t):"vertex"==i.type&&r.vertices[i.vindex].listeners.fireDragEndEvent(t)}r.draggedElements=[],r.redraw()}}).wheel(function(t){t.deltaY<0?(r.draw.scale.x=r.fill.scale.x=r.config.scaleX=1.25*r.config.scaleX,r.draw.scale.y=r.fill.scale.y=r.config.scaleY=1.25*r.config.scaleY):t.deltaY>0&&(r.draw.scale.x=r.fill.scale.x=r.config.scaleX=r.config.scaleX/1.25,r.draw.scale.y=r.fill.scale.y=r.config.scaleY=r.config.scaleY/1.25),r.redraw()});var a=new KeyHandler({trackAll:!0}).down("enter",function(){console.log("ENTER was hit.")}).press("enter",function(){console.log("ENTER was pressed.")}).up("enter",function(){console.log("ENTER was released.")}).down("escape",function(){console.log("ESCAPE was hit."),r.clearSelection(!0)}).down("shift",function(){console.log("SHIFT was hit."),r.selectPolygon=new Polygon,r.redraw()}).up("shift",function(){console.log("SHIFT was released."),null!=r.selectPolygon&&(r.selectVerticesInPolygon(r.selectPolygon),r.selectPolygon=null,r.redraw())}).down("y",function(){console.log("y was hit.")}).up("y",function(){console.log("y was released.")}).down("e",function(){console.log("e was hit. shift is pressed?",a.isDown("shift"))}).up("windows",function(){console.log("windows was released.")});window.dialog=new overlayDialog("dialog-wrapper"),this.initDrawableObjects(),this.redraw(),this.canvas.focus()};t.PlotBoilerplate=e}(window)}]);