!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){i(1),i(2),i(3),i(4),i(5),i(6),i(8),i(9),t.exports=i(10)},function(t,e){},function(t,e){!function(t){"use strict";t.VertexAttr=function(){this.draggable=!0}}(window)},function(t,e){!function(t){"use strict";var e=function(){this.drag=[],this.dragStart=[],this.dragEnd=[]};e.prototype.addDragListener=function(t){this.drag.push(t)},e.prototype.addDragStartListener=function(t){this.dragStart.push(t)},e.prototype.addDragEndListener=function(t){this.dragEnd.push(t)},e.prototype.fireDragEvent=function(t){i(this.drag,t)},e.prototype.fireDragStartEvent=function(t){i(this.dragStart,t)},e.prototype.fireDragEndEvent=function(t){i(this.dragEnd,t)};var i=function(t,e){for(var i in t)t[i](e)};t.VertexListeners=e}(window)},function(t,e){!function(e){var i=(window?window:t.exports).Vertex=function(t,e){"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this.attr=new VertexAttr,this.listeners=new VertexListeners};i.prototype.set=function(t,e){return this.x=t,this.y=e,this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.addXY=function(t,e){return this.x+=t,this.y+=e,this},i.prototype.equals=function(t){var e=Math.abs(this.x-t.x)<1e-6,i=Math.abs(this.y-t.y)<1e-6;return e&&i},i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.distance=function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))},i.prototype.scale=function(t,e){return e&&void 0!==e||(e=new i(0,0)),this.x=e.x+(this.x-e.x)*t,this.y=e.y+(this.y-e.y)*t,this},i.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},i.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},i.prototype.toString=function(){return"("+this.x+","+this.y+")"}}()},function(t,e){},function(t,e,i){(function(t){!function(t){"use strict";t.drawutils=function(t,e){this.ctx=t,this.offset={x:0,y:0},this.scale={x:1,y:1},this.fillShapes=e},t.drawutils.prototype.line=function(t,e,i){this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+e.x*this.scale.x,this.offset.y+e.y*this.scale.y),this.ctx.strokeStyle=i,this.ctx.lineWidth=1,this.ctx.stroke()},t.drawutils.prototype._fillOrDraw=function(t){this.fillShapes?(this.ctx.fillStyle=t,this.ctx.fill()):(this.ctx.strokeStyle=t,this.ctx.stroke())},t.drawutils.prototype.cubicBezierCurve=function(t,e){if("undefined"==typeof CubicBezierCurve||!(t instanceof CubicBezierCurve))throw"The passed curve is not an instance of CubicBezierCurve and thus cannot be plotted with this function.";this.cubicBezier(t.startPoint,t.endPoint,t.startControlPoint,t.endControlPoint,e)},t.drawutils.prototype.cubicBezier=function(t,e,i,n,s){this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y),this.ctx.bezierCurveTo(this.offset.x+i.x*this.scale.x,this.offset.y+i.y*this.scale.y,this.offset.x+n.x*this.scale.x,this.offset.y+n.y*this.scale.y,this.offset.x+e.x*this.scale.x,this.offset.y+e.y*this.scale.y),this._fillOrDraw(s)},t.drawutils.prototype.cubicBezierCurveHandles=function(t){this.cubicBezierHandles(t.startPoint,t.endPoint,t.startControlPoint,t.endControlPoint)},t.drawutils.prototype.cubicBezierHandles=function(t,e,i,n){this.point(t,"rgb(0,32,192)"),this.point(e,"rgb(0,32,192)"),this.square(i,5,"rgba(0,128,192,0.5)"),this.square(n,5,"rgba(0,128,192,0.5)")},t.drawutils.prototype.cubicBezierCurveHandleLines=function(t){this.cubicBezierHandleLines(t.startPoint,t.endPoint,t.startControlPoint,t.endControlPoint)},t.drawutils.prototype.cubicBezierHandleLines=function(t,e,i,n){this.line(t,i,"lightgrey"),this.line(e,n,"lightgrey")},t.drawutils.prototype.point=function(t,e){this.ctx.beginPath(),this.ctx.arc(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,3,0,2*Math.PI,!1),this.ctx.closePath(),this._fillOrDraw(e)},t.drawutils.prototype.circle=function(t,e,i){this.ctx.beginPath(),this.ctx.arc(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,e,0,2*Math.PI),this.ctx.closePath(),this._fillOrDraw(i)},t.drawutils.prototype.square=function(t,e,i){this.ctx.beginPath(),this.ctx.rect(this.offset.x+(t.x-e/2)*this.scale.x,this.offset.y+(t.y-e/2)*this.scale.y,e*this.scale.x,e*this.scale.y),this.ctx.closePath(),this._fillOrDraw(i)},t.drawutils.prototype.crosshair=function(t,e,i){this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x-e,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+t.x*this.scale.x+e,this.offset.y+t.y*this.scale.y),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y-e),this.ctx.lineTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y+e),this.ctx.strokeStyle=i,this.ctx.lineWidth=.5,this.ctx.stroke(),this.ctx.closePath()},t.drawutils.prototype.string=function(t,e,i){this.fillShapes?(this.ctx.fillStyle="black",this.ctx.fillText(t,e,i)):(this.ctx.strokeStyle="black",this.ctx.strokeText(t,e,i))}}(window||t.export)}).call(this,i(7)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){!function(t){"use strict";var e=function(t){this.wrapper=document.getElementById(t),this.blanket=this.wrapper.getElementsByClassName("overlay-blanket")[0],this.content=this.blanket.getElementsByClassName("overlay-content")[0],n(this.wrapper,{display:"none",position:"fixed",left:"0px",top:"0px",width:"100vw",height:"100vh"}),n(this.blanket,{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",background:"rgba(0,0,0,0.5)"}),n(this.content,{width:"500px",height:"500px","max-width":"50%","max-height":"50%",background:"white",border:"1px solid grey","border-radius":"5px",position:"relative"}),this._headLine=document.createElement("h3"),this._contentNode=document.createElement("div"),this._buttonLine=document.createElement("div"),this.content.innerHTML="",this.content.appendChild(this._headLine),this.content.appendChild(this._contentNode),this.content.appendChild(this._buttonLine),this._textArea=null,n(this._headLine,{width:"calc(100% - 10px)",overflow:"hidden","border-bottom":"1px solid grey",margin:"6px 0px",padding:"0px 5px 3px"}),n(this._contentNode,{width:"calc(100% - 10px)",overflow:"hidden",margin:"0px",padding:"0px 5px",position:"absolute",top:"30px",height:"calc(100% - 60px)"}),n(this._buttonLine,{width:"calc(100% - 10px)",overflow:"hidden",position:"absolute",top:"auto",bottom:"0px","text-align":"right"}),r(this._headLine,"od-hl"),r(this._contentNode,"od-cn"),r(this._buttonLine,"od-bl")};function i(t,e){if("string"==typeof e&&"close"==e)i(t,{label:"Close",onclick:function(){s(t)}});else if("string"==typeof e&&"ok"==e)console.log("add ok button"),i(t,{label:"OK",onclick:function(){s(t)}});else{var n=document.createElement("button");n.type="button",n.innerHTML=e.label?e.label:"no-label","function"==typeof e.action?n.addEventListener("click",e.action):"close"==e.action&&n.addEventListener("click",function(){s(t)}),t._buttonLine.appendChild(n)}}function n(t,e){for(var i in e)t.style[i]=e[i]}function s(t){t.wrapper.style.display="none"}function r(t,e){var i=t.className.split(" ");-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" "))}e.prototype.show=function(t,e,n,s){if(this._headLine.innerHTML=e||"Please confirm",this.setMessage(t,s),this._buttonLine.innerHTML="",n)for(var r in n)i(this,n[r]);else i(this,"ok");this.wrapper.style.display="inherit"},e.prototype.setMessage=function(t,e){e={}||e,"string"==typeof t?(this._contentNode.innerHTML=t,e.messageClass&&r(this._contentNode,e.messageClass)):(this._contentNode.innerHTML="",this._contentNode.appendChild(t))},e.prototype.showTextArea=function(t,e,i,n){this._textArea=document.createElement("textarea"),this._textArea.innerHTML=t||"",this._textArea.style.width="100%",this._textArea.style.height="95%",this._textArea.style.border="0px",n&&n.messageClass&&(this._textArea.className=n.messageClass),this.show(this._textArea,e,i,n)},e.prototype.hide=function(){s(this)},t.overlayDialog=e}(window)},function(t,e){!function(t){"use strict";gup();!function(t){var e=function(t,e){this.item=t,this.type=e,this.vindex=null,this.pindex=null,this.cundex=null};e.VERTEX="vertex",e.prototype.isVertex=function(){return this.type==e.VERTEX},e.prototype.setVIndex=function(t){return this.vindex=t,this},t.Draggable=e}(t);var e=function(i){this.config={fullSize:!0,fitToParent:!0,scaleX:1.5,scaleY:1,drawEditorOutlines:!0,backgroundColor:"#ffffff",rebuild:function(){r()},loadImage:function(){var t=document.getElementById("file");t.setAttribute("data-type","image-upload"),function(t){t.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}(t)},saveFile:function(){s()}},this.canvas=document.getElementById("my-canvas"),this.ctx=this.canvas.getContext("2d"),this.draw=new drawutils(this.ctx,!1),this.fill=new drawutils(this.ctx,!0),this.image=null,this.imageBuffer=null,this.canvasSize={width:1024,height:768},this.vertices=[],this.draggedElements=[];var n=this;e.prototype.initDrawableObjects=function(){var t=Math.min(n.canvasSize.width,n.canvasSize.height)/3,e=[[new Vertex({x:0,y:-t}),new Vertex({x:t,y:0}),new Vertex({x:.5*t,y:-t}),new Vertex({x:.5*t,y:0})],[new Vertex({x:t,y:0}),new Vertex({x:0,y:t}),new Vertex({x:t,y:.5*t}),new Vertex({x:0,y:.5*t})],[new Vertex({x:0,y:t}),new Vertex({x:-t,y:0}),new Vertex({x:.5*-t,y:t}),new Vertex({x:.5*-t,y:0})],[new Vertex({x:-t,y:0}),new Vertex({x:0,y:-t}),new Vertex({x:-t,y:.5*-t}),new Vertex({x:0,y:.5*-t})]];for(var i in this.vertices=[],e)this.vertices.push(e[i][0]),this.vertices.push(e[i][1]),this.vertices.push(e[i][2]),this.vertices.push(e[i][3])},e.prototype.redraw=function(){this.ctx.fillStyle=n.config.backgroundColor,this.ctx.fillRect(0,0,n.canvasSize.width,n.canvasSize.height),n.image&&(n.config.fitImage?n.ctx.drawImage(n.image,0,0,n.image.width,n.image.height,0,0,n.canvasSize.width,n.canvasSize.height):n.ctx.drawImage(n.image,0,0)),console.log("draw");var t=Math.min(n.canvasSize.width,n.canvasSize.height)/3;n.draw.circle({x:0,y:0},t,"#000000");var e=[[new Vertex({x:0,y:-t}),new Vertex({x:t,y:0}),new Vertex({x:.5*t,y:-t}),new Vertex({x:.5*t,y:0})],[new Vertex({x:t,y:0}),new Vertex({x:0,y:t}),new Vertex({x:t,y:.5*t}),new Vertex({x:0,y:.5*t})],[new Vertex({x:0,y:t}),new Vertex({x:-t,y:0}),new Vertex({x:.5*-t,y:t}),new Vertex({x:.5*-t,y:0})],[new Vertex({x:-t,y:0}),new Vertex({x:0,y:-t}),new Vertex({x:-t,y:.5*-t}),new Vertex({x:0,y:.5*-t})]];for(var i in this.vertices)n.draw.square(this.vertices[i],5,"rgba(0,128,192,0.5)");for(var i in e)this.draw.cubicBezier(e[i][0],e[i][1],e[i][2],e[i][3],"#00a822")};document.getElementById("file").addEventListener("change",function(t){var e=document.getElementById("file").getAttribute("data-type");"image-upload"==e?function(t){if(-1!="image/gif,image/jpeg,image/jpg,image/gif,image/png".indexOf(t.target.files[0].type)||window.confirm("This seems not to be an image ("+t.target.files[0].type+"). Continue?")){var e=new FileReader;e.onload=function(t){this.image=new Image,this.image.onload=function(){imageBuffer=document.createElement("canvas"),imageBuffer.width=this.image.width,imageBuffer.height=this.image.height,imageBuffer.getContext("2d").drawImage(this.image,0,0,this.image.width,image.height),redraw()},this.image.src=t.target.result},e.readAsDataURL(t.target.files[0])}}(t):console.warn("Unrecognized upload type: "+e)});var s=function(){var t=new Blob(["Hello, world!"],{type:"text/plain;charset=utf-8"});saveAs(t,"helloworld.txt")},r=function(){};e.prototype.resizeCanvas=function(){var t=function(t,e){n.ctx.canvas.width=t,n.ctx.canvas.height=e,n.canvas.width=t,n.canvas.height=e,n.canvasSize.width=t,n.canvasSize.height=e,n.draw.offset.x=n.fill.offset.x=t/2,n.draw.offset.y=n.fill.offset.y=e/2};if(n.config.fullSize&&!n.config.fitToParent)t(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);else if(n.config.fitToParent){t(n.canvas.parentNode.clientWidth-2,n.canvas.parentNode.clientHeight-2)}else t(1024,768);n.redraw()},t.addEventListener("resize",this.resizeCanvas),this.resizeCanvas();new MouseHandler(this.canvas).mousedown(function(t){if(1==t.which){var e=function(t){for(var e in n.vertices){var i=n.vertices[e];if(i.distance(t)<7)return new Draggable(i,Draggable.VERTEX).setVIndex(e)}return!1}(function(t,e){return{x:t/n.draw.scale.x-n.draw.offset.x,y:e/n.draw.scale.y-n.draw.offset.y}}(t.params.pos.x,t.params.pos.y));console.log(e),e&&(n.draggedElements.push(e),"bpath"==e.type?n.paths[e.pindex].bezierCurves[e.cindex].getPointByID(e.pid).listeners.fireDragStartEvent(t):"vertex"==e.type&&n.vertices[e.vindex].listeners.fireDragStartEvent(t),n.redraw())}}).drag(function(t){for(var e in n.draggedElements){var i=n.draggedElements[e];"bpath"==i.type?(n.paths[i.pindex].moveCurvePoint(i.cindex,i.pid,t.params.dragAmount),n.paths[i.pindex].bezierCurves[i.cindex].getPointByID(i.pid).listeners.fireDragEvent(t)):"vertex"==i.type&&(n.vertices[i.vindex].add(t.params.dragAmount),n.vertices[i.vindex].listeners.fireDragEvent(t))}n.redraw()}).mouseup(function(t){if(1==t.which){for(var e in t.params.wasDragged||(t.params.pos.x,t.params.pos.y),n.draggedElements){var i=n.draggedElements[e];"bpath"==i.type?n.paths[i.pindex].bezierCurves[i.cindex].getPointByID(i.pid).listeners.fireDragEndEvent(t):"vertex"==i.type&&n.vertices[i.vindex].listeners.fireDragEndEvent(t)}n.draggedElements=[],n.redraw()}}),window.dialog=new overlayDialog("dialog-wrapper"),this.initDrawableObjects(),this.redraw()};t.PlotBoilerplate=e}(window)},function(t,e){!function(t){"use strict";gup();window.addEventListener("load",function(){var t=new PlotBoilerplate,e=new dat.gui.GUI;e.remember(t.config),e.add(t.config,"rebuild").name("Rebuild all").title("Rebuild all.");var i=e.addFolder("Editor settings");i.add(t.config,"fullSize").onChange(t.resizeCanvas).title("Toggles the fullpage mode."),i.add(t.config,"fitToParent").onChange(t.resizeCanvas).title("Toggles the fit-to-parent mode (overrides fullsize)."),i.add(t.config,"scaleX").onChange(function(){console.log("changed"),t.draw.scale.x=t.fill.scale.x=t.config.scaleX,t.redraw()}).title("Scale x.").min(0).max(10).step(.1),i.add(t.config,"drawEditorOutlines").onChange(t.redraw).title("Toggle if editor outlines should be drawn."),i.addColor(t.config,"backgroundColor").onChange(t.redraw).title("Choose a background color."),i.add(t.config,"loadImage").name("Load Image").title("Load a background image to pick triangle colors from."),e.addFolder("Export").add(t.config,"saveFile").name("Save a file").title("Save a file.")})}(window)}]);